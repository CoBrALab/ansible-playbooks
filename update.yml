- hosts: 
  - workstations
  - computenodes
  become: yes
  tasks:
   - name: update apt-get cache
     apt: update_cache=yes cache_valid_time=3600
     ignore_errors: yes
   - name: cleanup apt
     command: apt-get -y --purge autoremove
   - name: dist-upgrade
     apt: upgrade=dist  cache_valid_time=3600
   - name: cleanup apt
     command: apt-get -y --purge autoremove
   - name: update drivedb
     command: update-smart-drivedb
   - name: update-pciids
     command: update-pciids
   - name: update-usbids
     command: update-usbids
   - name: update-initram-fs
     command: update-initramfs -k all -c
   - name: update-grub
     command: update-grub
   - name: purge configs
     shell: "dpkg -l | grep '^rc' | awk '{print $2}' | xargs dpkg --purge"
     ignore_errors: yes
